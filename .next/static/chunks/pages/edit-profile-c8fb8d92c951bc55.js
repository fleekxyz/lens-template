(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{7944:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit-profile",function(){return t(1707)}])},504:function(e,n,t){"use strict";t.d(n,{zx:function(){return u},CI:function(){return b},Mj:function(){return l}});var r=t(5893),a=t(294),i=t(9306);function o(){var e,n,t=(e=["\nborder: none;\noutline: none;\nmargin-left: 15px;\ncolor: #340036;\npadding: 17px;\nborder-radius: 25px;\ncursor: pointer;\nfont-size: 14px;\nfont-weight: 500;\nbackground-color: rgb(",");\ntransition: all .35s;\nwidth: 240px;\nletter-spacing: .75px;\n&:hover {\n  background-color: rgba(",", .75);\n}\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return o=function(){return t},t}function u(e){var n=e.buttonText,t=e.onClick;return(0,r.jsx)("button",{className:s,onClick:t,children:n})}var s=(0,a.iv)(o(),i.h,i.h);function p(){var e,n,t=(e=["\n  outline: none;\n  border: none;\n  padding: 15px 20px;\n  font-size: 16px;\n  border-radius: 25px;\n  border: 2px solid rgba(0, 0, 0, .04);\n  transition: all .4s;\n  width: 300px;\n  background-color: #fafafa;\n  &:focus {\n    background-color: white;\n    border: 2px solid rgba(0, 0, 0, .1);\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return p=function(){return t},t}function l(e){var n=e.placeholder,t=e.onChange,a=e.value,i=e.onKeyDown,o=void 0===i?null:i;return(0,r.jsx)("input",{placeholder:n,onChange:t,value:a,className:c,onKeyDown:o})}var c=(0,a.iv)(p());function f(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function d(){var e=f(["\n  from {\n    opacity: .2;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: .2;\n  }\n"]);return d=function(){return e},e}function y(){var e=f(["\n  background-color: rgba(0, 0, 0, .1);\n  height: 115px;\n  width: 100%;\n  margin-top: 13px;\n  border-radius: 7px;\n  animation: "," 2s infinite linear;\n"]);return y=function(){return e},e}function b(e){for(var n=e.number,t=[],a=0;a<n;a++)t.push((0,r.jsx)("div",{className:v},a));return t}var m=(0,a.F4)(d()),v=(0,a.iv)(y(),m)},1707:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var r=t(4051),a=t.n(r),i=t(5893),o=t(7294),u=t(6076),s=t(5340),p=t(294),l=t(9306),c=t(504),f=t(5934),d=t(2296),y=JSON.parse('[{"inputs":[{"internalType":"contract ILensHub","name":"hub","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ArrayMismatch","type":"error"},{"inputs":[],"name":"FollowInvalid","type":"error"},{"inputs":[],"name":"NotProfileOwnerOrDispatcher","type":"error"},{"inputs":[],"name":"SignatureExpired","type":"error"},{"inputs":[],"name":"SignatureInvalid","type":"error"},{"inputs":[],"name":"TokenDoesNotExist","type":"error"},{"inputs":[],"name":"HUB","outputs":[{"internalType":"contract ILensHub","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"profileId","type":"uint256"}],"name":"getProfileMetadataURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"profileId","type":"uint256"},{"internalType":"string","name":"metadata","type":"string"}],"name":"setProfileMetadataURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"uint256","name":"profileId","type":"uint256"},{"internalType":"string","name":"metadata","type":"string"},{"components":[{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"},{"internalType":"uint256","name":"deadline","type":"uint256"}],"internalType":"struct DataTypes.EIP712Signature","name":"sig","type":"tuple"}],"internalType":"struct DataTypes.SetProfileMetadataWithSigData","name":"vars","type":"tuple"}],"name":"setProfileMetadataURIWithSig","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"sigNonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"profileIds","type":"uint256[]"},{"internalType":"bool[]","name":"enables","type":"bool[]"}],"name":"toggleFollow","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"follower","type":"address"},{"internalType":"uint256[]","name":"profileIds","type":"uint256[]"},{"internalType":"bool[]","name":"enables","type":"bool[]"},{"components":[{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"},{"internalType":"uint256","name":"deadline","type":"uint256"}],"internalType":"struct DataTypes.EIP712Signature","name":"sig","type":"tuple"}],"internalType":"struct DataTypes.ToggleFollowWithSigData","name":"vars","type":"tuple"}],"name":"toggleFollowWithSig","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),b=t(2117),m=t(1438),v=t(3454),g=t(8764).Buffer;function h(e,n,t,r,a,i,o){try{var u=e[i](o),s=u.value}catch(p){return void t(p)}u.done?n(s):Promise.resolve(s).then(r,a)}function x(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){h(i,r,a,o,u,"next",e)}function u(e){h(i,r,a,o,u,"throw",e)}o(void 0)}))}}function w(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){w(e,n,t[n])}))}return e}function j(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function P(){var e=j(["\n  padding-top: 25px;\n"]);return P=function(){return e},e}function O(){var e=j(["\n  width: 100%;\n  border-radius: 12px;\n  outline: none;\n  border: 2px solid rgba(0, 0, 0, .05);\n  padding: 12px 18px;\n  font-size: 14px;\n  border-color: transpaent;\n  margin-top: 10px;\n  margin-bottom: 30px;\n  &:focus {\n    border-color: rgb(",");\n  }\n"]);return O=function(){return e},e}function N(){var e=j(["\n  ",";\n  height: 100px;\n"]);return N=function(){return e},e}function I(){var e=j(["\n  font-weight: 600;\n"]);return I=function(){return e},e}function S(){var e=j(["\n  margin-top: 40px;\n"]);return S=function(){return e},e}var _=v.env.NEXT_PUBLIC_PROJECT_ID,k=v.env.NEXT_PUBLIC_PROJECT_SECRET,C="Basic "+g.from(_+":"+k).toString("base64"),M=(0,d.Ue)({host:"ipfs.infura.io",port:5001,protocol:"https",headers:{authorization:C}});function E(){var e=(0,o.useState)(),n=e[0],t=e[1],r=(0,o.useContext)(s.I).profile;function p(){return(p=x(a().mark((function e(){var t,i,o,s,p,l,c,d,v,g,h,x,w,j;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return n.twitter&&(t=r.attributes.findIndex((function(e){return"twitter"===e.key})),r.attributes[t].value=n.twitter),i=T({name:r.name,bio:r.bio,attributes:r.attributes,version:"1.0.0",metadata_id:(0,f.Z)(),previousMetadata:r.metadata,createdOn:(new Date).toISOString(),appId:"NaderDabitLensStarter"},n),r.coverPicture?i.cover_picture=r.coverPicture.original.url:i.cover_picture=null,e.next=7,M.add(JSON.stringify(i));case 7:return o=e.sent,s="https://ipfs.infura.io/ipfs/".concat(o.path),e.next=11,(0,b.eI)();case 11:return p=e.sent,e.next=14,p.mutation(b.kt,{profileId:r.id,metadata:s}).toPromise();case 14:return l=e.sent,c=l.data.createSetProfileMetadataTypedData.typedData,e.next=18,(0,m.vP)(c.domain,c.types,c.value);case 18:return d=e.sent,v=(0,m.N)(d),g=v.v,h=v.r,x=v.s,w=new u.CH(b.k4,y,(0,m.TC)()),e.next=23,w.setProfileMetadataURIWithSig({profileId:r.id,metadata:s,sig:{v:g,r:h,s:x,deadline:c.value.deadline}});case 23:j=e.sent,console.log("tx: ",j);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(!r)return null;var l=r.attributes.reduce((function(e,n){return e[n.key]=n.value,e}),{});return(0,i.jsxs)("div",{className:D,children:[(0,i.jsx)("h2",{children:"Edit Profile"}),(0,i.jsxs)("div",{className:B,children:[(0,i.jsx)("label",{className:R,children:"Name"}),(0,i.jsx)("input",{value:n&&n.name?n.name:r.name,className:z,onChange:function(e){return t(T({},n,{name:e.target.value}))}}),(0,i.jsx)("label",{className:R,children:"Bio"}),(0,i.jsx)("textarea",{value:n&&n.bio?n.bio:r.bio,className:U,onChange:function(e){return t(T({},n,{bio:e.target.value}))}}),l&&l.twitter&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{className:R,children:"Twitter"}),(0,i.jsx)("input",{value:n&&n.twitter?n.twitter:l.twitter,className:z,onChange:function(e){return t(T({},n,{twitter:e.target.value}))}})]}),(0,i.jsx)(c.zx,{buttonText:"Save Profile",onClick:function(){return p.apply(this,arguments)}})]})]})}var D=(0,p.iv)(P()),z=(0,p.iv)(O(),l.h),U=(0,p.iv)(N(),z),R=(0,p.iv)(I()),B=(0,p.iv)(S())},9306:function(e,n,t){"use strict";t.d(n,{h:function(){return r}});var r="249, 92, 255"}},function(e){e.O(0,[774,888,179],(function(){return n=7944,e(e.s=n);var n}));var n=e.O();_N_E=n}]);